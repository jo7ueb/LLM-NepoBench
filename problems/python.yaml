- id: py_remove_even
  lang: python
  prompt: |
    次の関数にはバグがあり、偶数が正しく削除されません。
    期待結果は remove_even_numbers([1,2,4,8,9]) == [1,9] です。
    解説不要。修正後のPythonコードのみ出力してください。

    def remove_even_numbers(numbers):
        for num in numbers:
            if num % 2 == 0:
                numbers.remove(num)
        return numbers
  tests:
    tests/test_solution.py: |
      from solution import remove_even_numbers

      def test_remove_even():
          assert remove_even_numbers([1,2,4,8,9]) == [1,9]

- id: py_fastapi_tasks
  lang: python
  prompt: |
    FastAPI と Pydantic を使って簡単なタスク管理APIを実装してください。
    次の仕様を満たす単一ファイル solution.py を出力してください（解説不要）。

    仕様:
    - FastAPI app インスタンス名は `app`
    - POST /tasks でタスク作成
      - 入力: {"title": str, "done": bool}
      - 出力: {"id": int, "title": str, "done": bool}
    - GET /tasks で一覧取得（作成順）
    - DBはインメモリ配列でOK
    - タイトルは空文字禁止（空なら 422 などのバリデーションエラーでOK）
  tests:
    tests/test_solution.py: |
      from fastapi.testclient import TestClient
      from solution import app

      client = TestClient(app)

      def test_tasks_flow():
          r = client.get("/tasks")
          assert r.status_code == 200
          assert r.json() == []

          r = client.post("/tasks", json={"title": "a", "done": False})
          assert r.status_code == 200
          body = r.json()
          assert body["id"] == 1
          assert body["title"] == "a"
          assert body["done"] is False

          r = client.post("/tasks", json={"title": "b", "done": True})
          assert r.status_code == 200
          body2 = r.json()
          assert body2["id"] == 2

          r = client.get("/tasks")
          assert r.status_code == 200
          items = r.json()
          assert [t["id"] for t in items] == [1,2]
          assert items[0]["title"] == "a"
          assert items[1]["done"] is True

      def test_title_validation():
          r = client.post("/tasks", json={"title": "", "done": False})
          assert r.status_code in (400, 422)
